
;;; results with only whips[2], S3 and all IMP630 loaded
;;; value of ?*max-guardians* unrestricted

(mute-print-options)
(solve-n-grids-after-first-p-from-text-file
    "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 0 100)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 24m 15.99s
;;; TOTAL RESOLUTION TIME = 22m 43.1s
;;; MAX TIME = 17.92s
(length$ ?*Imp630-list*)
0
?*Imp630-list*

(mute-print-options)
(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 100 100)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 24m 19.97s
;;; TOTAL RESOLUTION TIME = 22m 46.84s
;;; MAX TIME = 17.94s
(length$ ?*Imp630-list*)
1
?*Imp630-list*
(198)

(mute-print-options)
(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 200 800)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 3h 17m 30.95s
;;; TOTAL RESOLUTION TIME = 3h 4m 12.98s
;;; MAX TIME = 19.27s
(length$ ?*Imp630-list*)
4
?*Imp630-list*
(208 227 236 302)


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 1000 1000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 4h 12m 0.86s
;;; TOTAL RESOLUTION TIME = 3h 55m 21.57s
;;; MAX TIME = 18.98s
(length$ ?*Imp630-list*)
33
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 2000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 9h 6m 32.16s
;;; TOTAL RESOLUTION TIME = 8h 30m 9.54s
;;; MAX TIME = 22.04s
(length$ ?*Imp630-list*)
41
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 4000 1000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 4h 46m 59.59s
;;; TOTAL RESOLUTION TIME = 4h 29m 49.7s
;;; MAX TIME = 21.81s
(length$ ?*Imp630-list*)
29
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 5000 3000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 13h 18m 59.05s
;;; TOTAL RESOLUTION TIME = 12h 23m 9.26s
;;; MAX TIME = 22.15s
(length$ ?*Imp630-list*)
577
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 8000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 10h 38m 6.78s
;;; TOTAL RESOLUTION TIME = 10h 42.64s
;;; MAX TIME = 23.45s
(length$ ?*Imp630-list*)
425
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 10000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 10h 37m 22.18s
;;; TOTAL RESOLUTION TIME = 10h 52.73s
;;; MAX TIME = 22.72s
(length$ ?*Imp630-list*)
163
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 12000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 10h 15m 25.19s
;;; TOTAL RESOLUTION TIME = 9h 39m 5.53s
;;; MAX TIME = 22.44s
(length$ ?*Imp630-list*)
191
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 14000 4000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 20h 6m 42.88s
;;; TOTAL RESOLUTION TIME = 18h 53m 41.77s
;;; MAX TIME = 23.26s
(length$ ?*Imp630-list*)
478
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 16000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 10h 48m 21.75s
;;; TOTAL RESOLUTION TIME = 10h 11m 21.12s
;;; MAX TIME = 22.61s
(length$ ?*Imp630-list*)
319
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 18000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 10h 57m 22.48s
;;; TOTAL RESOLUTION TIME = 10h 19m 5.77s
;;; MAX TIME = 24.12s
(length$ ?*Imp630-list*)
89
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 20000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 9h 48m 29.96s
;;; TOTAL RESOLUTION TIME = 9h 12m 20.47s
;;; MAX TIME = 21.61s
(length$ ?*Imp630-list*)
277
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 22000 2000)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 11h 3m 28.62s
;;; TOTAL RESOLUTION TIME = 10h 27m 4.8s
;;; MAX TIME = 24.14s
(length$ ?*Imp630-list*)
396
?*Imp630-list*


(solve-n-grids-after-first-p-from-text-file "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/puzzles.txt" 24000 2370)
;;; computer = MacBookPro 16'' M1Max 2021 3.2GHz, 64GB LPDDR5, MacOS 14.2
;;; TOTAL OUTER TIME = 11h 57m 34.7s
;;; TOTAL RESOLUTION TIME = 11h 14m 46.74s
;;; MAX TIME = 24.32s
(length$ ?*Imp630-list*)
507
?*Imp630-list*



;;; Check if the frequency depends on the BxB classif

(load
    "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/Imp630-list.txt")
(length$ ?*Imp630-list*)
3211
(/ 3211 26368) = 12.18%


(deffunction nb-Imp630-in-BxB (?BxB-file ?p-value)
    (bind ?nb 0)
    (open ?BxB-file "BxB-file" "r")
    (loop-for-count (?i 1 26370)
        (bind ?p (eval (readline "BxB-file")))
        (if (and (eq ?p ?p-value)
                (member$ ?i ?*Imp630-list*)
            )
            then (bind ?nb (+ ?nb 1))
        )
    )
    (close)
    ?nb
)


(nb-Imp630-in-BxB      "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/BxB.txt"
7)
0
0%

(nb-Imp630-in-BxB      "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/BxB.txt"
    6
)
0 i.e. 0 %

(nb-Imp630-in-BxB      "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/BxB.txt"
    5
)
1 (/ 1 630) = 0.16 %

(nb-Imp630-in-BxB      "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/BxB.txt"
    4
)
37 (/ 37 5890) = 0.63 %

(nb-Imp630-in-BxB      "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/BxB.txt"
    3
)
1423 (/ 1423 12174) = 11.69 % %

(nb-Imp630-in-BxB      "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/BxB.txt"
    2
)
1750 (/ 1750 7635) = 22.92 %

;;; nb puzzles in BxB
1
40
630
5890
12174
7635
;;; nb pattern in BxB
0
0
1
37
1423
1750
;;; % pattern in BxB
0
0
0.16
0.63
11.69
22.92




;;; Check if the frequency depends on the SER classif.
(defglobal ?*SER-boundaries* = (create$
    4 ; 11.9
    24 ; 11.8
    58 ; 11.7
    106 ; 11.6
    215 ; 11.5
    477 ; 11.4
    1685 ; 11.3
    3374 ; 11.2
    6030 ; 11.1
    7848 ; 11.0
    10275 ; 10.9
    13206 ; 10.8
    17812 ; 10.7
    26370 ; 10.6
))


(deffunction count-SERs (?SER-boundaries)
    (bind ?count1 (nth$ 1 ?SER-boundaries))
    (bind ?res (create$ ?count1))
    (bind ?count2 0)
    (loop-for-count (?i 2 14)
        (bind ?count2 (nth$ ?i ?SER-boundaries))
        (bind ?res (create$ ?res (- ?count2 ?count1)))
        (bind ?count1 ?count2)
    )
    ?res
)
(count-SERs ?*SER-boundaries*)
(4 20 34 48 109 262 1208 1689 2656 1818 2427 2931 4606 8558)


(deffunction count-elements-per-SER-in-list (?elements-list ?SER-length ?SER-boundaries)
    ;;; the original list of puzzles is supposed to be ordered by decreasing SER values
    (bind ?j119 0)
    (bind ?j118 0)
    (bind ?j117 0)
    (bind ?j116 0)
    (bind ?j115 0)
    (bind ?j114 0)
    (bind ?j113 0)
    (bind ?j112 0)
    (bind ?j111 0)
    (bind ?j110 0)
    (bind ?j109 0)
    (bind ?j108 0)
    (bind ?j107 0)
    (bind ?j106 0)
    (bind ?n1 (nth$ 1 ?SER-boundaries))
    (bind ?n2 (nth$ 2 ?SER-boundaries))
    (bind ?n3 (nth$ 3 ?SER-boundaries))
    (bind ?n4 (nth$ 4 ?SER-boundaries))
    (bind ?n5 (nth$ 5 ?SER-boundaries))
    (bind ?n6 (nth$ 6 ?SER-boundaries))
    (bind ?n7 (nth$ 7 ?SER-boundaries))
    (bind ?n8 (nth$ 8 ?SER-boundaries))
    (bind ?n9 (nth$ 9 ?SER-boundaries))
    (bind ?n10 (nth$ 10 ?SER-boundaries))
    (bind ?n11 (nth$ 11 ?SER-boundaries))
    (bind ?n12 (nth$ 12 ?SER-boundaries))
    (bind ?n13 (nth$ 13 ?SER-boundaries))
    (bind ?n14 (nth$ 14 ?SER-boundaries))
    (foreach ?i ?elements-list
        (switch TRUE
            (case (<= ?i ?n1) then (bind ?j119 (+ ?j119 1)))
            (case (<= ?i ?n2) then (bind ?j118 (+ ?j118 1)))
            (case (<= ?i ?n3) then (bind ?j117 (+ ?j117 1)))
            (case (<= ?i ?n4) then (bind ?j116 (+ ?j116 1)))
            (case (<= ?i ?n5) then (bind ?j115 (+ ?j115 1)))
            (case (<= ?i ?n6) then (bind ?j114 (+ ?j114 1)))
            (case (<= ?i ?n7) then (bind ?j113 (+ ?j113 1)))
            (case (<= ?i ?n8) then (bind ?j112 (+ ?j112 1)))
            (case (<= ?i ?n9) then (bind ?j111 (+ ?j111 1)))
            (case (<= ?i ?n10) then (bind ?j110 (+ ?j110 1)))
            (case (<= ?i ?n11) then (bind ?j109 (+ ?j109 1)))
            (case (<= ?i ?n12) then (bind ?j108 (+ ?j108 1)))
            (case (<= ?i ?n13) then (bind ?j107 (+ ?j107 1)))
            (case (<= ?i ?n14) then (bind ?j106 (+ ?j106 1)))
            (default (printout t ?i crlf))
        )
    )
    (create$
        ?j119
        ?j118
        ?j117
        ?j116
        ?j115
        ?j114
        ?j113
        ?j112
        ?j111
        ?j110
        ?j109
        ?j108
        ?j107
        ?j106
    )
)

(count-elements-per-SER-in-list ?*Imp630-list* 26371 ?*SER-boundaries*)
(0 0 0 0 2 3 31 37 164 446 504 257 489 1278)


(deffunction count-percent-per-SER-in-list (?elements-list ?SER-length ?SER-boundaries)
    (bind ?SER-counts (count-SERs ?SER-boundaries))
    (bind ?elements-counts (count-elements-per-SER-in-list ?elements-list ?SER-length ?SER-boundaries))
    (bind ?percents (create$))
    (loop-for-count (?i 1 14)
        (bind ?new-percent (/ (round (* 10000 (/ (nth$ ?i ?elements-counts) (nth$ ?i ?SER-counts)))) 100))
        (bind ?percents
            (create$ ?percents ?new-percent)
        )
    )
    ?percents
)

(count-percent-per-SER-in-list ?*Imp630-list* 26371 ?*SER-boundaries*)
(0.0 0.0 0.0 0.0 1.83 1.15 2.57 2.19 6.17 24.53 20.77 8.77 10.62 14.93)




;;; check if the frequency depends on BxB

(deffunction sublist-with-given-Z-value (?list ?Z-file ?Z-file-length ?z-value)
    (bind ?nb-puzzles 0) ; #puzzles with Z-value ?z-value
    (bind ?nb-puzzles-in-list 0) ; number of these pouzzles in ?list
    (bind ?sublist (create$))
    (open ?Z-file "Z-file" "r")
    (bind ?n 0)
    (while (< ?n ?Z-file-length)
        (bind ?n (+ ?n 1))
        (if (eq (read "Z-file") ?z-value)
            then (bind ?nb-puzzles (+ ?nb-puzzles 1))
                (if (member$ ?n ?list) then (bind ?nb-puzzles-in-list (+ ?nb-puzzles-in-list 1)) (bind ?sublist (create$ ?sublist ?n)))
        )
    )
    (close "Z-file")
    (printout t "p = " ?z-value ", nb-puzzles = " ?nb-puzzles ", nb-puzzles-in-list = " ?nb-puzzles-in-list ", %-puzzles-in-list = " (* 100 (/ ?nb-puzzles-in-list ?nb-puzzles)) crlf)
    ?sublist
)

(loop-for-count (?i 0 5)
    (bind ?p (- 7 ?i))
    (sublist-with-given-Z-value
        ?*degenerate-cyclic-tridagon-list*
        "/Users/berthier/Projects/CSP-Rules-Results/SudoRules-Results/HARDEST-PUZZLES/Elevens-hardest-V2-26370/BxB.txt"
        26370
        ?p
    )
)






;;; WOW !!!!!!!! almost all of ?*Imp630-list* is included in ?*degenerate-cyclic-tridagon-list*
(length$ (intersection$ ?*degenerate-cyclic-tridagon-list* ?*Imp630-list* ))
3198

(length$ (set-difference ?*degenerate-cyclic-tridagon-list* ?*Imp630-list* ))
7687

(length$ (set-difference ?*Imp630-list*  ?*degenerate-cyclic-tridagon-list*))
13
(set-difference ?*Imp630-list*  ?*degenerate-cyclic-tridagon-list*)
(5622 7017 7516 17578 18668 20993 21529 21680 25275 25276 25421 25793 26178)






Not among the patterns frequently used in T&E(3)
EL10c12:
;;;     +-------+-------+-------+
;;;     ! . . . ! . . . ! . . . !
;;;     ! . . . ! . . . ! . . X !
;;;     ! . . . ! . . X ! . X X !
;;;     +-------+-------+-------+
;;;     ! . . . ! . . . ! . . . !
;;;     ! . . X ! . . X ! . . X !
;;;     ! . X X ! . . X ! . . . !
;;;     +-------+-------+-------+
;;;     ! . . . ! . . . ! . . . !
;;;     ! . . . ! . . . ! . . . !
;;;     ! . . . ! . . . ! . . . !
;;;     +-------+-------+-------+


EL10c23:
;;;     +-------+-------+-------+
;;;     ! . . . ! . . . ! . . . !
;;;     ! . . . ! . . . ! . . X !
;;;     ! . . . ! . . X ! X X . !
;;;     +-------+-------+-------+
;;;     ! . . . ! . . X ! . . . !
;;;     ! . . . ! . . X ! . . X !
;;;     ! . . . ! . X . ! X X . !
;;;     +-------+-------+-------+
;;;     ! . . . ! . . . ! . . . !
;;;     ! . . . ! . . . ! . . . !
;;;     ! . . . ! . . . ! . . . !
;;;     +-------+-------+-------+

